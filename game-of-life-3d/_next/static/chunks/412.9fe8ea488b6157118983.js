(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[412],{105:function(t,e){"use strict";var o,i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};function r(t){return t.isPerspectiveCamera}function n(t){return t.isOrthographicCamera}!function(t){t[t.NONE=0]="NONE",t[t.ROTATE=1]="ROTATE",t[t.TRUCK=2]="TRUCK",t[t.OFFSET=3]="OFFSET",t[t.DOLLY=4]="DOLLY",t[t.ZOOM=5]="ZOOM",t[t.TOUCH_ROTATE=6]="TOUCH_ROTATE",t[t.TOUCH_TRUCK=7]="TOUCH_TRUCK",t[t.TOUCH_OFFSET=8]="TOUCH_OFFSET",t[t.TOUCH_DOLLY=9]="TOUCH_DOLLY",t[t.TOUCH_ZOOM=10]="TOUCH_ZOOM",t[t.TOUCH_DOLLY_TRUCK=11]="TOUCH_DOLLY_TRUCK",t[t.TOUCH_DOLLY_OFFSET=12]="TOUCH_DOLLY_OFFSET",t[t.TOUCH_ZOOM_TRUCK=13]="TOUCH_ZOOM_TRUCK",t[t.TOUCH_ZOOM_OFFSET=14]="TOUCH_ZOOM_OFFSET"}(o||(o={}));var a=2*Math.PI,s=Math.PI/2;function c(t){return Math.abs(t)<1e-5}function l(t,e){return Math.round(t/e)*e}function h(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function p(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function d(t){return"TouchEvent"in window&&t instanceof TouchEvent}function _(t,e){if(e.set(0,0),d(t)){for(var o=t,i=0;i<o.touches.length;i++)e.x+=o.touches[i].clientX,e.y+=o.touches[i].clientY;return e.x/=o.touches.length,e.y/=o.touches.length,e}var r=t;return e.set(r.clientX,r.clientY),e}function u(t,e){return!!n(t)&&(console.warn(e+" is not supported in OrthographicCamera"),!0)}function m(t){return t.invert?t.invert():t.inverse(),t}var f,y,v,E,g,O,T,C,x,A,b,U,w,F,S,z,L,M,D,R,V=function(){function t(){this._listeners={}}return t.prototype.addEventListener=function(t,e){var o=this._listeners;void 0===o[t]&&(o[t]=[]),-1===o[t].indexOf(e)&&o[t].push(e)},t.prototype.removeEventListener=function(t,e){var o=this._listeners[t];if(void 0!==o){var i=o.indexOf(e);-1!==i&&o.splice(i,1)}},t.prototype.removeAllEventListeners=function(t){t?Array.isArray(this._listeners[t])&&(this._listeners[t].length=0):this._listeners={}},t.prototype.dispatchEvent=function(t){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var o=e.slice(0),i=0,r=o.length;i<r;i++)o[i].call(this,t)}},t}(),P="undefined"!==typeof window&&/Mac/.test(navigator.platform),k=Object.freeze(o),H=1/8,B=function(t){function e(e,i){var s=t.call(this)||this;if(s.minPolarAngle=0,s.maxPolarAngle=Math.PI,s.minAzimuthAngle=-1/0,s.maxAzimuthAngle=1/0,s.minDistance=0,s.maxDistance=1/0,s.infinityDolly=!1,s.minZoom=.01,s.maxZoom=1/0,s.dampingFactor=.05,s.draggingDampingFactor=.25,s.azimuthRotateSpeed=1,s.polarRotateSpeed=1,s.dollySpeed=1,s.truckSpeed=2,s.dollyToCursor=!1,s.dragToOffset=!1,s.verticalDragToForward=!1,s.boundaryFriction=0,s.colliderMeshes=[],s.cancel=function(){},s._enabled=!0,s._state=o.NONE,s._viewport=null,s._dollyControlAmount=0,s._boundaryEnclosesCamera=!1,s._needsUpdate=!0,s._updatedLastTime=!1,s._truckInternal=function(t,e,o){if(r(s._camera)){var i=O.copy(s._camera.position).sub(s._target),a=s._camera.getEffectiveFOV()*f.MathUtils.DEG2RAD,c=i.length()*Math.tan(.5*a),l=s.truckSpeed*t*c/s._elementRect.w,h=s.truckSpeed*e*c/s._elementRect.w;s.verticalDragToForward?(o?s.setFocalOffset(s._focalOffsetEnd.x+l,s._focalOffsetEnd.y,s._focalOffsetEnd.z,!0):s.truck(l,0,!0),s.forward(-h,!0)):o?s.setFocalOffset(s._focalOffsetEnd.x+l,s._focalOffsetEnd.y+h,s._focalOffsetEnd.z,!0):s.truck(l,h,!0)}else if(n(s._camera)){var p=s._camera;l=t*(p.right-p.left)/p.zoom/s._elementRect.z,h=e*(p.top-p.bottom)/p.zoom/s._elementRect.w;o?s.setFocalOffset(s._focalOffsetEnd.x+l,s._focalOffsetEnd.y+h,s._focalOffsetEnd.z,!0):s.truck(l,h,!0)}},s._rotateInternal=function(t,e){var o=a*s.azimuthRotateSpeed*t/s._elementRect.w,i=a*s.polarRotateSpeed*e/s._elementRect.w;s.rotate(o,i,!0)},s._dollyInternal=function(t,e,o){var i=Math.pow(.95,-t*s.dollySpeed),r=s._sphericalEnd.radius*i,n=s._sphericalEnd.radius;s.dollyTo(r),s.infinityDolly&&r<s.minDistance&&(s._camera.getWorldDirection(O),s._targetEnd.add(O.normalize().multiplyScalar(n)),s._target.add(O.normalize().multiplyScalar(n))),s.dollyToCursor&&(s._dollyControlAmount+=s._sphericalEnd.radius-n,s.infinityDolly&&r<s.minDistance&&(s._dollyControlAmount-=n),s._dollyControlCoord.set(e,o))},s._zoomInternal=function(t,e,o){var i=Math.pow(.95,t*s.dollySpeed);s.zoomTo(s._zoom*i),s.dollyToCursor&&(s._dollyControlAmount=s._zoomEnd,s._dollyControlCoord.set(e,o))},"undefined"===typeof f&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),s._camera=e,s._yAxisUpSpace=(new f.Quaternion).setFromUnitVectors(s._camera.up,v),s._yAxisUpSpaceInverse=m(s._yAxisUpSpace.clone()),s._state=o.NONE,s._domElement=i,s._target=new f.Vector3,s._targetEnd=s._target.clone(),s._focalOffset=new f.Vector3,s._focalOffsetEnd=s._focalOffset.clone(),s._spherical=(new f.Spherical).setFromVector3(O.copy(s._camera.position).applyQuaternion(s._yAxisUpSpace)),s._sphericalEnd=s._spherical.clone(),s._zoom=s._camera.zoom,s._zoomEnd=s._zoom,s._nearPlaneCorners=[new f.Vector3,new f.Vector3,new f.Vector3,new f.Vector3],s._updateNearPlaneCorners(),s._boundary=new f.Box3(new f.Vector3(-1/0,-1/0,-1/0),new f.Vector3(1/0,1/0,1/0)),s._target0=s._target.clone(),s._position0=s._camera.position.clone(),s._zoom0=s._zoom,s._focalOffset0=s._focalOffset.clone(),s._dollyControlAmount=0,s._dollyControlCoord=new f.Vector2,s.mouseButtons={left:o.ROTATE,middle:o.DOLLY,right:o.TRUCK,wheel:r(s._camera)?o.DOLLY:n(s._camera)?o.ZOOM:o.NONE},s.touches={one:o.TOUCH_ROTATE,two:r(s._camera)?o.TOUCH_DOLLY_TRUCK:n(s._camera)?o.TOUCH_ZOOM_TRUCK:o.NONE,three:o.TOUCH_TRUCK},s._elementRect=new f.Vector4,s._domElement){var c=new f.Vector2,l=new f.Vector2,h=new f.Vector2,p=function(){s._state=o.NONE,document.removeEventListener("mousemove",A),document.removeEventListener("touchmove",A,{passive:!1}),document.removeEventListener("mouseup",b),document.removeEventListener("touchend",b)},u=function(t){if(s._enabled){switch(p(),t.button){case f.MOUSE.LEFT:s._state=s.mouseButtons.left;break;case f.MOUSE.MIDDLE:s._state=s.mouseButtons.middle;break;case f.MOUSE.RIGHT:s._state=s.mouseButtons.right}x(t)}},y=function(t){if(s._enabled){switch(p(),t.touches.length){case 1:s._state=s.touches.one;break;case 2:s._state=s.touches.two;break;case 3:s._state=s.touches.three}x(t)}},E=-1,T=function(t){if(s._enabled&&s.mouseButtons.wheel!==o.NONE){if(t.preventDefault(),s.dollyToCursor||s.mouseButtons.wheel===o.ROTATE||s.mouseButtons.wheel===o.TRUCK){var e=performance.now();E-e<1e3&&s._getClientRect(s._elementRect),E=e}var i=P?-1:-3,r=1===t.deltaMode?t.deltaY/i:t.deltaY/(10*i),n=s.dollyToCursor?(t.clientX-s._elementRect.x)/s._elementRect.z*2-1:0,a=s.dollyToCursor?(t.clientY-s._elementRect.y)/s._elementRect.w*-2+1:0;switch(s.mouseButtons.wheel){case o.ROTATE:s._rotateInternal(t.deltaX,t.deltaY);break;case o.TRUCK:s._truckInternal(t.deltaX,t.deltaY,!1);break;case o.OFFSET:s._truckInternal(t.deltaX,t.deltaY,!0);break;case o.DOLLY:s._dollyInternal(-r,n,a);break;case o.ZOOM:s._zoomInternal(-r,n,a)}s.dispatchEvent({type:"control",originalEvent:t})}},C=function(t){s._enabled&&t.preventDefault()},x=function(t){if(s._enabled){if(_(t,g),s._getClientRect(s._elementRect),c.copy(g),l.copy(g),d(t)&&t.touches.length>=2){var e=t,o=g.x-e.touches[1].clientX,i=g.y-e.touches[1].clientY,r=Math.sqrt(o*o+i*i);h.set(0,r);var n=.5*(e.touches[0].clientX+e.touches[1].clientX),a=.5*(e.touches[0].clientY+e.touches[1].clientY);l.set(n,a)}document.addEventListener("mousemove",A),document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("mouseup",b),document.addEventListener("touchend",b),s.dispatchEvent({type:"controlstart",originalEvent:t})}},A=function(t){if(s._enabled){t.cancelable&&t.preventDefault(),_(t,g);var e=l.x-g.x,i=l.y-g.y;switch(l.copy(g),s._state){case o.ROTATE:case o.TOUCH_ROTATE:s._rotateInternal(e,i);break;case o.DOLLY:case o.ZOOM:var r=s.dollyToCursor?(c.x-s._elementRect.x)/s._elementRect.z*2-1:0,n=s.dollyToCursor?(c.y-s._elementRect.y)/s._elementRect.w*-2+1:0;s._state===o.DOLLY?s._dollyInternal(i*H,r,n):s._zoomInternal(i*H,r,n);break;case o.TOUCH_DOLLY:case o.TOUCH_ZOOM:case o.TOUCH_DOLLY_TRUCK:case o.TOUCH_ZOOM_TRUCK:case o.TOUCH_DOLLY_OFFSET:case o.TOUCH_ZOOM_OFFSET:var a=t,p=g.x-a.touches[1].clientX,d=g.y-a.touches[1].clientY,u=Math.sqrt(p*p+d*d),m=h.y-u;h.set(0,u);r=s.dollyToCursor?(l.x-s._elementRect.x)/s._elementRect.z*2-1:0,n=s.dollyToCursor?(l.y-s._elementRect.y)/s._elementRect.w*-2+1:0;s._state===o.TOUCH_DOLLY||s._state===o.TOUCH_DOLLY_TRUCK?s._dollyInternal(m*H,r,n):s._zoomInternal(m*H,r,n),s._state===o.TOUCH_DOLLY_TRUCK||s._state===o.TOUCH_ZOOM_TRUCK?s._truckInternal(e,i,!1):s._state!==o.TOUCH_DOLLY_OFFSET&&s._state!==o.TOUCH_ZOOM_OFFSET||s._truckInternal(e,i,!0);break;case o.TRUCK:case o.TOUCH_TRUCK:s._truckInternal(e,i,!1);break;case o.OFFSET:case o.TOUCH_OFFSET:s._truckInternal(e,i,!0)}s.dispatchEvent({type:"control",originalEvent:t})}},b=function(t){s._enabled&&(p(),s.dispatchEvent({type:"controlend",originalEvent:t}))};s._domElement.addEventListener("mousedown",u),s._domElement.addEventListener("touchstart",y,{passive:!0}),s._domElement.addEventListener("wheel",T,{passive:!1}),s._domElement.addEventListener("contextmenu",C),s._removeAllEventListeners=function(){s._domElement.removeEventListener("mousedown",u),s._domElement.removeEventListener("touchstart",y,{passive:!0}),s._domElement.removeEventListener("wheel",T,{passive:!1}),s._domElement.removeEventListener("contextmenu",C),document.removeEventListener("mousemove",A),document.removeEventListener("touchmove",A,{passive:!1}),document.removeEventListener("mouseup",b),document.removeEventListener("touchend",b)},s.cancel=function(){p(),s.dispatchEvent({type:"controlend",originalEvent:null})}}return s.update(0),s}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(e,t),e.install=function(t){f=t.THREE,y=Object.freeze(new f.Vector3(0,0,0)),v=Object.freeze(new f.Vector3(0,1,0)),E=Object.freeze(new f.Vector3(0,0,1)),g=new f.Vector2,O=new f.Vector3,T=new f.Vector3,C=new f.Vector3,x=new f.Vector3,A=new f.Vector3,b=new f.Vector3,U=new f.Spherical,w=new f.Spherical,F=new f.Box3,S=new f.Box3,z=new f.Sphere,L=new f.Quaternion,M=new f.Quaternion,D=new f.Matrix4,R=new f.Raycaster},Object.defineProperty(e,"ACTION",{get:function(){return k},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,t||this.cancel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentAction",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._spherical.radius},set:function(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"azimuthAngle",{get:function(){return this._spherical.theta},set:function(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polarAngle",{get:function(){return this._spherical.phi},set:function(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundaryEnclosesCamera",{get:function(){return this._boundaryEnclosesCamera},set:function(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,o){t.prototype.addEventListener.call(this,e,o)},e.prototype.removeEventListener=function(e,o){t.prototype.removeEventListener.call(this,e,o)},e.prototype.rotate=function(t,e,o){void 0===o&&(o=!1),this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,o)},e.prototype.rotateTo=function(t,e,o){void 0===o&&(o=!1);var i=f.MathUtils.clamp(t,this.minAzimuthAngle,this.maxAzimuthAngle),r=f.MathUtils.clamp(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),o||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi),this._needsUpdate=!0},e.prototype.dolly=function(t,e){void 0===e&&(e=!1),this.dollyTo(this._sphericalEnd.radius-t,e)},e.prototype.dollyTo=function(t,e){void 0===e&&(e=!1),this._sphericalEnd.radius=f.MathUtils.clamp(t,this.minDistance,this.maxDistance),e||(this._spherical.radius=this._sphericalEnd.radius),this._needsUpdate=!0},e.prototype.zoom=function(t,e){void 0===e&&(e=!1),this.zoomTo(this._zoomEnd+t,e)},e.prototype.zoomTo=function(t,e){void 0===e&&(e=!1),this._zoomEnd=f.MathUtils.clamp(t,this.minZoom,this.maxZoom),e||(this._zoom=this._zoomEnd),this._needsUpdate=!0},e.prototype.pan=function(t,e,o){void 0===o&&(o=!1),console.log("`pan` has been renamed to `truck`"),this.truck(t,e,o)},e.prototype.truck=function(t,e,o){void 0===o&&(o=!1),this._camera.updateMatrix(),x.setFromMatrixColumn(this._camera.matrix,0),A.setFromMatrixColumn(this._camera.matrix,1),x.multiplyScalar(t),A.multiplyScalar(-e);var i=O.copy(x).add(A);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),o||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.forward=function(t,e){void 0===e&&(e=!1),O.setFromMatrixColumn(this._camera.matrix,0),O.crossVectors(this._camera.up,O),O.multiplyScalar(t),this._encloseToBoundary(this._targetEnd,O,this.boundaryFriction),e||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.moveTo=function(t,e,o,i){void 0===i&&(i=!1),this._targetEnd.set(t,e,o),i||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.fitToBox=function(t,e,o){var i=void 0===o?{}:o,a=i.paddingLeft,h=void 0===a?0:a,p=i.paddingRight,d=void 0===p?0:p,_=i.paddingBottom,u=void 0===_?0:_,m=i.paddingTop,f=void 0===m?0:m,y=t.isBox3?F.copy(t):F.setFromObject(t);if(y.isEmpty())console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting");else{var g=l(this._sphericalEnd.theta,s),C=l(this._sphericalEnd.phi,s);this.rotateTo(g,C,e);var x=O.setFromSpherical(this._sphericalEnd).normalize(),A=L.setFromUnitVectors(x,E);c(Math.abs(x.y)-1)&&A.multiply(M.setFromAxisAngle(v,g));var b=S.makeEmpty();T.copy(y.min).applyQuaternion(A),b.expandByPoint(T),T.copy(y.min).setX(y.max.x).applyQuaternion(A),b.expandByPoint(T),T.copy(y.min).setY(y.max.y).applyQuaternion(A),b.expandByPoint(T),T.copy(y.max).setZ(y.min.z).applyQuaternion(A),b.expandByPoint(T),T.copy(y.min).setZ(y.max.z).applyQuaternion(A),b.expandByPoint(T),T.copy(y.max).setY(y.min.y).applyQuaternion(A),b.expandByPoint(T),T.copy(y.max).setX(y.min.x).applyQuaternion(A),b.expandByPoint(T),T.copy(y.max).applyQuaternion(A),b.expandByPoint(T),A.setFromUnitVectors(E,x),b.min.x-=h,b.min.y-=u,b.max.x+=d,b.max.y+=f;var U=b.getSize(O),w=b.getCenter(T).applyQuaternion(A);if(r(this._camera)){var z=this.getDistanceToFitBox(U.x,U.y,U.z);return this.moveTo(w.x,w.y,w.z,e),this.dollyTo(z,e),void this.setFocalOffset(0,0,0,e)}if(n(this._camera)){var D=this._camera,R=D.right-D.left,V=D.top-D.bottom,P=Math.min(R/U.x,V/U.y);return this.moveTo(w.x,w.y,w.z,e),this.zoomTo(P,e),void this.setFocalOffset(0,0,0,e)}}},e.prototype.fitTo=function(t,e,o){void 0===o&&(o={}),console.warn("camera-controls: fitTo() has been renamed to fitToBox()"),this.fitToBox(t,e,o)},e.prototype.fitToSphere=function(t,e){var o=t instanceof f.Sphere?z.copy(t):function(t,e){var o=e,i=o.center;t.traverse((function(t){t.isMesh&&F.expandByObject(t)})),F.getCenter(i);var r=0;return t.traverse((function(t){if(t.isMesh){var e=t,o=e.geometry.clone();if(o.applyMatrix4(e.matrixWorld),o.isBufferGeometry)for(var n=0,a=(s=o.attributes.position).count;n<a;n++)O.fromBufferAttribute(s,n),r=Math.max(r,i.distanceToSquared(O));else{var s=o.attributes.position,c=new f.Vector3;for(n=0,a=s.count;n<a;n++)c.fromBufferAttribute(s,n),r=Math.max(r,i.distanceToSquared(c))}}})),o.radius=Math.sqrt(r),o}(t,z);if(this.moveTo(o.center.x,o.center.y,o.center.z,e),r(this._camera)){var i=this.getDistanceToFitSphere(o.radius);this.dollyTo(i,e)}else if(n(this._camera)){var a=this._camera.right-this._camera.left,s=this._camera.top-this._camera.bottom,c=2*o.radius,l=Math.min(a/c,s/c);this.zoomTo(l,e)}this.setFocalOffset(0,0,0,e)},e.prototype.setLookAt=function(t,e,o,i,r,n,a){void 0===a&&(a=!1);var s=O.set(t,e,o),c=T.set(i,r,n);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(s.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},e.prototype.lerpLookAt=function(t,e,o,i,r,n,a,s,c,l,h,p,d,_){void 0===_&&(_=!1);var u=O.set(t,e,o),m=T.set(i,r,n);U.setFromVector3(u.sub(m).applyQuaternion(this._yAxisUpSpace));var f=O.set(l,h,p);this._targetEnd.copy(m).lerp(f,d);var y=T.set(a,s,c);w.setFromVector3(y.sub(f).applyQuaternion(this._yAxisUpSpace));var v=w.theta-U.theta,E=w.phi-U.phi,g=w.radius-U.radius;this._sphericalEnd.set(U.radius+g*d,U.phi+E*d,U.theta+v*d),this.normalizeRotations(),_||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},e.prototype.setPosition=function(t,e,o,i){void 0===i&&(i=!1),this.setLookAt(t,e,o,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)},e.prototype.setTarget=function(t,e,o,i){void 0===i&&(i=!1);var r=this.getPosition(O);this.setLookAt(r.x,r.y,r.z,t,e,o,i)},e.prototype.setFocalOffset=function(t,e,o,i){void 0===i&&(i=!1),this._focalOffsetEnd.set(t,e,o),i||this._focalOffset.copy(this._focalOffsetEnd),this._needsUpdate=!0},e.prototype.setBoundary=function(t){if(!t)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0},e.prototype.setViewport=function(t,e,o,i){null!==t?(this._viewport=this._viewport||new f.Vector4,"number"===typeof t?this._viewport.set(t,e,o,i):this._viewport.copy(t)):this._viewport=null},e.prototype.getDistanceToFitBox=function(t,e,o){if(u(this._camera,"getDistanceToFitBox"))return this._spherical.radius;var i=t/e,r=this._camera.getEffectiveFOV()*f.MathUtils.DEG2RAD,n=this._camera.aspect;return.5*(i<n?e:t/n)/Math.tan(.5*r)+.5*o},e.prototype.getDistanceToFit=function(t,e,o){return console.warn("camera-controls: getDistanceToFit() has been renamed to getDistanceToFitBox()"),this.getDistanceToFitBox(t,e,o)},e.prototype.getDistanceToFitSphere=function(t){if(u(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;var e=this._camera.getEffectiveFOV()*f.MathUtils.DEG2RAD,o=2*Math.atan(Math.tan(.5*e)*this._camera.aspect),i=1<this._camera.aspect?e:o;return t/Math.sin(.5*i)},e.prototype.getTarget=function(t){return(t&&t.isVector3?t:new f.Vector3).copy(this._targetEnd)},e.prototype.getPosition=function(t){return(t&&t.isVector3?t:new f.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)},e.prototype.getFocalOffset=function(t){return(t&&t.isVector3?t:new f.Vector3).copy(this._focalOffsetEnd)},e.prototype.normalizeRotations=function(){this._sphericalEnd.theta=this._sphericalEnd.theta%a,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=a),this._spherical.theta+=a*Math.round((this._sphericalEnd.theta-this._spherical.theta)/a)},e.prototype.reset=function(t){void 0===t&&(t=!1),this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)},e.prototype.saveState=function(){this._target0.copy(this._target),this._position0.copy(this._camera.position),this._zoom0=this._zoom},e.prototype.updateCameraUp=function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,v),m(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))},e.prototype.update=function(t){var e=this._state===o.NONE?this.dampingFactor:this.draggingDampingFactor,i=1-Math.exp(-e*t*60),a=this._sphericalEnd.theta-this._spherical.theta,s=this._sphericalEnd.phi-this._spherical.phi,l=this._sphericalEnd.radius-this._spherical.radius,h=O.subVectors(this._targetEnd,this._target),p=T.subVectors(this._focalOffsetEnd,this._focalOffset);if(c(a)&&c(s)&&c(l)&&c(h.x)&&c(h.y)&&c(h.z)&&c(p.x)&&c(p.y)&&c(p.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)):(this._spherical.set(this._spherical.radius+l*i,this._spherical.phi+s*i,this._spherical.theta+a*i),this._target.add(h.multiplyScalar(i)),this._focalOffset.add(p.multiplyScalar(i)),this._needsUpdate=!0),0!==this._dollyControlAmount){if(r(this._camera)){var d=this._camera,_=O.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),u=T.copy(_).cross(d.up).normalize();0===u.lengthSq()&&(u.x=1);var m=C.crossVectors(u,_),y=this._sphericalEnd.radius*Math.tan(d.getEffectiveFOV()*f.MathUtils.DEG2RAD*.5),v=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,E=O.copy(this._targetEnd).add(u.multiplyScalar(this._dollyControlCoord.x*y*d.aspect)).add(m.multiplyScalar(this._dollyControlCoord.y*y));this._targetEnd.lerp(E,v),this._target.copy(this._targetEnd)}else if(n(this._camera)){d=this._camera;var g=O.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(d.near+d.far)/(d.near-d.far)).unproject(d),U=T.set(0,0,-1).applyQuaternion(d.quaternion),w=U.dot(d.up),F=c(w)?-g.dot(d.up):-g.dot(d.up)/w;E=C.copy(g).add(U.multiplyScalar(F));this._targetEnd.lerp(E,1-d.zoom/this._dollyControlAmount),this._target.copy(this._targetEnd)}this._dollyControlAmount=0}var S=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,S),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!c(this._focalOffset.x)||!c(this._focalOffset.y)||!c(this._focalOffset.z))&&(this._camera.updateMatrix(),x.setFromMatrixColumn(this._camera.matrix,0),A.setFromMatrixColumn(this._camera.matrix,1),b.setFromMatrixColumn(this._camera.matrix,2),x.multiplyScalar(this._focalOffset.x),A.multiplyScalar(-this._focalOffset.y),b.multiplyScalar(this._focalOffset.z),O.copy(x).add(A).add(b),this._camera.position.add(O)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),O.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var z=this._zoomEnd-this._zoom;this._zoom+=z*i,this._camera.zoom!==this._zoom&&(c(z)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);var L=this._needsUpdate;return L&&!this._updatedLastTime?(this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):L?this.dispatchEvent({type:"update"}):!L&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=L,this._needsUpdate=!1,L},e.prototype.toJSON=function(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:h(this.maxDistance),minZoom:this.minZoom,maxZoom:h(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:h(this.maxPolarAngle),minAzimuthAngle:h(this.minAzimuthAngle),maxAzimuthAngle:h(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:O.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})},e.prototype.fromJSON=function(t,e){void 0===e&&(e=!1);var o=JSON.parse(t),i=O.fromArray(o.position);this.enabled=o.enabled,this.minDistance=o.minDistance,this.maxDistance=p(o.maxDistance),this.minZoom=o.minZoom,this.maxZoom=p(o.maxZoom),this.minPolarAngle=o.minPolarAngle,this.maxPolarAngle=p(o.maxPolarAngle),this.minAzimuthAngle=p(o.minAzimuthAngle),this.maxAzimuthAngle=p(o.maxAzimuthAngle),this.dampingFactor=o.dampingFactor,this.draggingDampingFactor=o.draggingDampingFactor,this.dollySpeed=o.dollySpeed,this.truckSpeed=o.truckSpeed,this.dollyToCursor=o.dollyToCursor,this.verticalDragToForward=o.verticalDragToForward,this._target0.fromArray(o.target0),this._position0.fromArray(o.position0),this._zoom0=o.zoom0,this._focalOffset0.fromArray(o.focalOffset0),this.moveTo(o.target[0],o.target[1],o.target[2],e),U.setFromVector3(i.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(U.theta,U.phi,e),this.zoomTo(o.zoom,e),this.setFocalOffset(o.focalOffset[0],o.focalOffset[1],o.focalOffset[2],e),this._needsUpdate=!0},e.prototype.dispose=function(){this._removeAllEventListeners()},e.prototype._encloseToBoundary=function(t,e,o){var i=e.lengthSq();if(0===i)return t;var r=T.copy(e).add(t),n=this._boundary.clampPoint(r,C).sub(r),a=n.lengthSq();if(0===a)return t.add(e);if(a===i)return t;if(0===o)return t.add(e).add(n);var s=1+o*a/e.dot(n);return t.add(T.copy(e).multiplyScalar(s)).add(n.multiplyScalar(1-o))},e.prototype._updateNearPlaneCorners=function(){if(r(this._camera)){var t=(a=this._camera).near,e=a.getEffectiveFOV()*f.MathUtils.DEG2RAD,o=Math.tan(.5*e)*t,i=o*a.aspect;this._nearPlaneCorners[0].set(-i,-o,0),this._nearPlaneCorners[1].set(i,-o,0),this._nearPlaneCorners[2].set(i,o,0),this._nearPlaneCorners[3].set(-i,o,0)}else if(n(this._camera)){var a,s=1/(a=this._camera).zoom,c=a.left*s,l=a.right*s,h=a.top*s,p=a.bottom*s;this._nearPlaneCorners[0].set(c,h,0),this._nearPlaneCorners[1].set(l,h,0),this._nearPlaneCorners[2].set(l,p,0),this._nearPlaneCorners[3].set(c,p,0)}},e.prototype._collisionTest=function(){var t=1/0;if(!(this.colliderMeshes.length>=1))return t;if(u(this._camera,"_collisionTest"))return t;t=this._spherical.radius;var e=O.setFromSpherical(this._spherical).divideScalar(t);D.lookAt(y,e,this._camera.up);for(var o=0;o<4;o++){var i=T.copy(this._nearPlaneCorners[o]);i.applyMatrix4(D);var r=C.addVectors(this._target,i);R.set(r,e),R.far=t;var n=R.intersectObjects(this.colliderMeshes);0!==n.length&&n[0].distance<t&&(t=n[0].distance)}return t},e.prototype._getClientRect=function(t){var e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.z=this._viewport.z,t.w=this._viewport.w):(t.z=e.width,t.w=e.height),t},e.prototype._removeAllEventListeners=function(){},e}(V);e.Z=B},4047:function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}o.d(e,{Z:function(){return i}})},2700:function(t,e,o){"use strict";function i(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),t}o.d(e,{Z:function(){return r}})},1385:function(t,e,o){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return i(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}o.d(e,{Z:function(){return r}})}}]);